---
import iconsIndex from '@data/icons.json';

// Importa el contenido (raw) de todos los SVGs definidos en icons.json.
const icons = await Promise.all(
  Object.values(iconsIndex).map(icon => import(/* @vite-ignore */ `${icon.src}?raw`))
);
const iconMap = new Map(Object.keys(iconsIndex).map((n, i) => [n, icons[i].default]));

export interface Props {
  name: keyof typeof iconsIndex;
  class?: string;
  [key: string]: any;
}

const { name, class: className, ...rest } = Astro.props;
const raw = iconMap.get(name) || '';
---
<!--
** Ejemplos de uso:
* Ícono decorativo (por defecto)
<Icon name="arrow-up-right" />

* Ícono con significado y accesible para lectores de pantalla
<Icon name="email" title="Enviar correo" />

* Ícono con tamaño y clase personalizados
<Icon name="copy" class="text-blue-500" width="32" height="32" />
-->
{
  raw && (
    <span class={className} {...rest} set:html={raw} />
  )
}
<style>
  svg.icon {
    width: 1.2em;
    height: 1.2em;
    display: inline-block;
    vertical-align: middle;
    fill: currentColor
  }
</style>